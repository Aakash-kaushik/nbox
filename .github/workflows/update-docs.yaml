name: Update nbox docs
on:
  push:
    branches: [master, docs]
    paths:
      - "docs-src/**"
  workflow_dispatch:
jobs:
  docs-gen:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout the files
        uses: actions/checkout@v2
      - name: Install Sphinx and furo
        run: |
          sudo apt-get -y install python3-sphinx
          pip install furo randomname==0.1.3 rich==10.7.0 requests==2.25.1 numpy==1.19.5 Pillow==^8.3.2 skl2onnx==1.9.3
      - name: Make html
        working-directory: "docs-src/"
        run: |
          make github
      - name: Commit docs
        run: |
          git config --global user.name "NimbleBox Research"
          git config --global user.email 'research@nimblebox.ai'
          git add docs/
          git commit -m "Update Docs"
          git push
